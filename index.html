<head>
  <title>Dose Response</title>
  <link rel="stylesheet" href="dose-response.css" />
</head>
<body>
  <canvas id="game"> </canvas>
</body>
  <script id="vs" type="notjs">
// Window size (rendering area) in pixels
uniform vec2 native_display_px;

attribute vec2 pos_px;
attribute vec2 tile_pos_px;
attribute vec4 color;

varying vec2 v_tile_pos_px;
varying vec4 v_color;

void main() {
  v_color = color;
  v_tile_pos_px = tile_pos_px;

  // Convert the pixel position to the (0, 1) coordinate space:
  vec2 pos_01 = pos_px / native_display_px;

  // Convert pos to the GL coordinate space (-1, 1), y grows up:
  vec2 pos_gl = vec2(1.0, -1.0) * (2.0 * pos_01 - 1.0);
  gl_Position = vec4(pos_gl, 0.0, 1.0);
}
  </script>
  <script id="fs" type="notjs">
precision mediump float;

uniform sampler2D tex;

varying vec2 v_tile_pos_px;
varying vec4 v_color;

void main() {
  if (v_tile_pos_px.x < 0.0 && v_tile_pos_px.y < 0.0) {
    gl_FragColor = v_color;
  } else {
    //gl_FragColor = texture2D(tex, v_tile_pos_px) * v_color;
    gl_FragColor = texture2D(tex, v_tile_pos_px) * vec4(1, 1, 1, 1);
  }
}
  </script>

<script src="twgl-full.js"></script>
<script src="msgpack.min.js"></script>
<script src="normalize_key.js"></script>
<script src="dose-response.js"></script>
<script>
  console.log("Running script!");
  play_game(document.getElementById("game"), 'target/wasm32-unknown-unknown/release/dose-response.wasm');
</script>
